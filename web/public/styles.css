:root{
  --bg:#eaf4ff; --panel:#ffffff; --ink:#0f2137;
  --muted:#6b7a90; --accent:#6aa6ff; --ring:#d8e7ff;
}

/* NIGHT */
body.night{
  --bg:#0b1830;
  --panel:#0f2442;
  --ink:#eaf2ff;
  --muted:#c8dcff;
  --accent:#7cc2ff;
  --ring:#1f3b5e;
}

*{ box-sizing:border-box; }
html, body{ height:100%; }

body{
  margin:0;
  font-family:"Inter","Noto Sans Thai",system-ui,sans-serif;
  background: radial-gradient(1200px 400px at 50% -50%, #fff, var(--bg));
  color:var(--ink);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== PAGE WRAPPER ===== */
.page{
  max-width:1200px;
  margin:0 auto;
  padding: clamp(12px, 2.5vw, 24px);
}

/* ===== HERO ===== */
.hero{ text-align:center; padding: clamp(20px, 3vw, 28px) 16px 12px; }
.hero .title{ font-size: clamp(26px, 4.2vw, 40px); font-weight:800 }
.hero .subtitle{ color:var(--muted); margin-top:6px; }

/* ===== TOOLBAR ===== */
.toolbar{ display:flex; justify-content:space-between; align-items:center; gap:12px; padding:8px 16px; flex-wrap:wrap; }
.badge{ background:var(--panel); border:1px solid var(--ring); border-radius:999px; padding:6px 10px; margin-right:6px; }
.right{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.btn{ background:#fff; border:1px solid var(--ring); border-radius:10px; padding:8px 12px; cursor:pointer; color:#000 }
.btn.blip .spin-icon{ animation:spin 0.5s linear 1 }
@keyframes spin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
.seg{ display:inline-flex; background:var(--panel); border:1px solid var(--ring); border-radius:10px; overflow:hidden }
.seg-btn{ padding:8px 12px; border:none; background:transparent; cursor:pointer; color:var(--muted); }
.seg-btn.active{ background:var(--accent); color:#003263; font-weight:700 }

/* ===== LAYOUT ===== */
.container{ max-width:1100px; margin:0 auto; padding:12px; }
.card{
  background:var(--panel);
  border:1px solid var(--ring);
  border-radius:18px;
  padding: clamp(12px, 2vw, 16px);
  margin:12px auto;
  box-shadow:0 6px 18px rgba(0,0,0,.05);
}

/* headline */
.headline{ display:flex; justify-content:space-between; align-items:flex-end; gap:12px; flex-wrap:wrap; }
.current .title-th{ font-weight:700; font-size: clamp(16px, 2.4vw, 20px); }
.updated-line{ margin-top:6px; }

/* current temp */
.currentTemp{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.emoji{ font-size: clamp(34px, 5vw, 42px); }
.temp{ font-size: clamp(30px, 6vw, 36px); font-weight:800; white-space:nowrap; }

/* ค่าปัจจุบัน — เหลือ 3 ช่อง → กริดยืดหยุ่น */
.grid4.metrics{
  display:grid;
  gap:12px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  margin-top:12px;
}
.kv{
  background: rgba(255,255,255,.6);
  border:1px solid var(--ring);
  border-radius:12px;
  padding:12px 14px;
  min-width:0;
}
.label{ color:var(--muted); font-size:14px; }
.small{ font-size:12px; }
.arrow{ margin-top:6px; opacity:.7 }

/* รายชั่วโมง/รายสัปดาห์ */
.hlist, .dlist, .hours-grid, .days-grid{
  display:grid;
  gap:12px;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}
.tile{
  background: rgba(255,255,255,.6);
  border:1px solid var(--ring);
  border-radius:12px;
  padding:12px;
  min-width:0;
}

.muted{ color:var(--muted) }
.live{ color:#12c05b; font-weight:700; margin-left:4px }

/* ซ่อนเวลาใหญ่เดิม */
#lastUpdated{ display:none !important; }

/* ===== NIGHT THEME ===== */
body.night .kv,
body.night .tile{ background:rgba(255,255,255,0.10); border-color:var(--ring); }
body.night .label{ color:var(--muted); }
body.night .kv b,
body.night .temp,
body.night .current .title-th,
body.night .title{ color:var(--ink); }

/* ===== SKY FX ===== */
#wxfx{ position:fixed; inset:0; pointer-events:none; z-index:1; }
.hero, .toolbar, .container{ position:relative; z-index:2; }

.cloud{
  position:absolute; width:220px; height:80px; background:#fff;
  border-radius:70px; filter:blur(1px); opacity:.32; animation:drift linear infinite;
}
.cloud::before{ content:""; position:absolute; left:24px; top:-26px; width:120px; height:120px; background:#fff; border-radius:50%}
.cloud::after{ content:""; position:absolute; left:120px; top:-10px; width:140px; height:100px; background:#fff; border-radius:50%}
@keyframes drift{ from{ transform:translateX(-30vw)} to{ transform:translateX(130vw)} }

.sun,.moon{ position:absolute; top:10vh; left:10vw; width:72px; height:72px; border-radius:50%; box-shadow:0 0 40px rgba(255,200,0,.5) }
.sun{ background:radial-gradient(#fffca8,#ffd34d)}
.moon{ background:radial-gradient(#fff,#cfd8ff); box-shadow:0 0 30px rgba(180,200,255,.5)}

/* ทำให้เมฆชัดขึ้น “เฉพาะ Light mode” */
body:not(.night) .cloud{
  opacity:.65;
  filter: blur(.6px);   /* ลดความเบลอเล็กน้อย */
  box-shadow: 0 8px 24px rgba(255,255,255,.18) inset; /* ไฮไลต์ในก้อนเมฆเบา ๆ */
}
body:not(.night) .cloud::before,
body:not(.night) .cloud::after{
  background:#ffffff;   /* ขาวจัดขึ้นนิด */
}

.fxDrop{ position:absolute; top:-5vh; width:2px; height:18px; background:#73a7ff; opacity:.55; animation:fall linear 1.1s }
@keyframes fall{ to{ transform:translateY(105vh) } }

/* “— ถัดไป —” */
.tile.next{
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:var(--muted);
  background:transparent;
  border:1px dashed var(--ring);
}

/* ===== ERROR ===== */
.uierror{ background:#ffefef; color:#8a0020; border:1px solid #ffd7d7; padding:6px 10px; border-radius:8px }

/* ===== BREAKPOINTS ===== */
@media (max-width: 1024px){
  .grid4.metrics{
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  }
}
@media (max-width: 768px){
  .page{ padding:16px; }
  .container{ padding:10px; }
  .hero{ padding-top: 18px; }
  .hlist, .dlist, .hours-grid, .days-grid{
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  }
}
@media (max-width: 480px){
  .grid4.metrics{ grid-template-columns: 1fr; }
  .emoji{ font-size: 36px; }
  .temp{ font-size: 32px; }
}

/* ========== WEEKLY COLOR TOKENS ========== */
/* 0=Sun, 1=Mon, ... 6=Sat */
.w0 { --wk:#ff6b6b;  --wkbg:rgba(255,107,107,.08); }   /* Sun – red   */
.w1 { --wk:#ffd166;  --wkbg:rgba(255,209,102,.10); }   /* Mon – yellow*/
.w2 { --wk:#ff9ed1;  --wkbg:rgba(255,158,209,.10); }   /* Tue – pink  */
.w3 { --wk:#63d48f;  --wkbg:rgba(99,212,143,.10); }    /* Wed – green */
.w4 { --wk:#ffad61;  --wkbg:rgba(255,173,97,.10); }    /* Thu – orange*/
.w5 { --wk:#6aa6ff;  --wkbg:rgba(106,166,255,.10); }   /* Fri – blue  */
.w6 { --wk:#b28dff;  --wkbg:rgba(178,141,255,.12); }   /* Sat – purple*/

/* การ์ดรายสัปดาห์ให้รองรับสี */
.tile.day-tile{
  position:relative;
  border-color: var(--wk, var(--ring));
  background: var(--wkbg, rgba(255,255,255,.6));
}

/* แถบสีบาง ๆ ด้านบน เพิ่มความพรีเมียม */
.tile.day-tile::after{
  content:"";
  position:absolute;
  left:12px; right:12px; top:8px; height:4px;
  border-radius:999px;
  background: var(--wk, transparent);
  opacity:.55;
}

/* จัดตัวอักษรในการ์ดรายสัปดาห์ให้บาลานซ์ */
.day-title{ font-weight:600; }
.day-range{ margin-top:6px; }

.chart-card{
  margin-top: 10px;
  background: rgba(255,255,255,.6);
  border:1px solid var(--ring);
  border-radius: 12px;
  padding: 10px;
}
body.night .chart-card{
  background: rgba(255,255,255,.08);
}
